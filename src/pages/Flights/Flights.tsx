import React from 'react';
import { book } from '@routes/book';
import { Icon } from 'react-lib';
import Layout from '@components/Layout';
import { Route } from 'react-router';
import AllTask from '@pages/Flights/AllTask/AllTask';
import WorkWithBid from '@pages/Flights/WorkWithBid/WorkWithBid';
import styles from './Flights.module.scss';
import FlightWork from '@pages/Flights/FlightWork/FlightWork';

//New
import EmergencyAlert from './EmergencyAlert';
import Photofixations from './Photofixation';
import Applications from './Applications/Applications';
import Chat from './Chat';
import { checkAccess } from '@helpers/utils';
import FlightWorkV2 from './FlightWork/FlightWorkV2';
import AdminPanel from '@pages/Flights/AdminPanel/AdminPanel';

const Flights = () => {
  const sidebar = React.useMemo(
    () => [
      checkAccess(['0', '4', '5', '6']) && {
        id: '1',
        title: 'Начальный экран',
        to: `${book.flights}/`,
        icon: <Icon name={'home'} />,
        render: () => <AllTask />,
      },
      checkAccess(['0', '1', '4', '5', '6']) && {
        id: '2',
        title: 'Работа с заявками',
        to: `${book.flights}/bid`,
        icon: <Icon name={'roles'} />,
        render: () => <Applications />,
      },
      // checkAccess(['0', '4','6']) && {
      //   id: '3',
      //   title: 'Работа с рейсами',
      //   to: `${book.flights}/flightWork`,
      //   icon: <Icon name={'transportation'} />,
      //   render: () => <FlightWork />,
      // },
      checkAccess(['0', '4', '5', '6']) && {
        id: '3',
        title: 'Работа с рейсами',
        to: `${book.flights}/flightWork`,
        icon: <Icon name={'transportation'} />,
        //V2 это без классификаторов
        render: () => <FlightWorkV2 />,
      },
      checkAccess(['0', '4', '5', '6']) &&
        process.env.KEYCLOAK_URL ===
          `https://sso.dev.utg.group/auth/` && {
          id: '4',
          title: 'Фотофиксация',
          to: `${book.flights}/photofix`,
          icon: (
            <svg
              width='24'
              height='24'
              viewBox='0 0 24 24'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <path
                d='M21.3334 6.69175C20.9335 6.27289 20.3814 6.02538 19.7531 6.02538H16.5926V5.9873C16.5926 5.51133 16.4023 5.05439 16.0786 4.74977C15.7549 4.42611 15.317 4.23572 14.8411 4.23572H9.12936C8.63435 4.23572 8.19645 4.42611 7.87279 4.74977C7.54913 5.07343 7.35874 5.51133 7.35874 5.9873V6.02538H4.2173C3.58902 6.02538 3.03689 6.27289 2.63707 6.69175C2.23725 7.09157 1.9707 7.66274 1.9707 8.27198V17.7534C1.9707 18.3817 2.21821 18.9338 2.63707 19.3336C3.03689 19.7335 3.60806 20 4.2173 20H19.7531C20.3814 20 20.9335 19.7525 21.3334 19.3336C21.7332 18.9338 21.9997 18.3626 21.9997 17.7534V8.27198C21.9997 7.6437 21.7522 7.09157 21.3334 6.69175ZM21.0097 17.7534H20.9907C20.9907 18.0961 20.8574 18.4007 20.6289 18.6292C20.4004 18.8577 20.0958 18.9909 19.7531 18.9909H4.2173C3.8746 18.9909 3.56998 18.8577 3.34151 18.6292C3.11304 18.4007 2.97977 18.0961 2.97977 17.7534V8.27198C2.97977 7.92928 3.11304 7.62466 3.34151 7.39619C3.56998 7.16772 3.8746 7.03445 4.2173 7.03445H7.89183C8.17741 7.03445 8.40588 6.80598 8.40588 6.5204V5.96827C8.40588 5.75884 8.48204 5.56845 8.61531 5.43517C8.74858 5.3019 8.93897 5.22575 9.1484 5.22575H14.8411C15.0505 5.22575 15.2409 5.3019 15.3741 5.43517C15.5074 5.56845 15.5836 5.75884 15.5836 5.96827V6.5204C15.5836 6.80598 15.812 7.03445 16.0976 7.03445H19.7722C20.1149 7.03445 20.4195 7.16772 20.6479 7.39619C20.8764 7.62466 21.0097 7.92928 21.0097 8.27198V17.7534Z'
                fill='black'
              />
              <path
                d='M11.9854 8.3291C10.6907 8.3291 9.51028 8.86219 8.67257 9.69991C7.81581 10.5567 7.30176 11.718 7.30176 13.0127C7.30176 14.3073 7.83485 15.4878 8.67257 16.3255C9.52932 17.1822 10.6907 17.6963 11.9854 17.6963C13.28 17.6963 14.4604 17.1632 15.2981 16.3255C16.1549 15.4687 16.6689 14.3073 16.6689 13.0127C16.6689 11.718 16.1359 10.5376 15.2981 9.69991C14.4604 8.86219 13.28 8.3291 11.9854 8.3291ZM14.5747 15.621C13.9083 16.2684 12.9944 16.6872 11.9854 16.6872C10.9763 16.6872 10.0624 16.2684 9.39605 15.621C8.72968 14.9547 8.32986 14.0408 8.32986 13.0317C8.32986 12.0227 8.74872 11.1088 9.39605 10.4424C10.0624 9.77606 10.9763 9.37625 11.9854 9.37625C12.9944 9.37625 13.9083 9.7951 14.5747 10.4424C15.241 11.1088 15.6408 12.0227 15.6408 13.0317C15.6599 14.0408 15.241 14.9547 14.5747 15.621Z'
                fill='black'
              />
              <path
                d='M18.763 10.1759C19.2782 10.1759 19.6959 9.7582 19.6959 9.24297C19.6959 8.72774 19.2782 8.31006 18.763 8.31006C18.2478 8.31006 17.8301 8.72774 17.8301 9.24297C17.8301 9.7582 18.2478 10.1759 18.763 10.1759Z'
                fill='black'
              />
            </svg>
          ),
          render: () => <Photofixations />,
        },
      checkAccess(['0', '4', '5', '6']) &&
        process.env.KEYCLOAK_URL ===
          `https://sso.dev.utg.group/auth/` && {
          id: '5',
          title: 'Чат с исполнителем',
          to: `${book.flights}/chatPerformer`,
          icon: (
            <svg
              width='24'
              height='24'
              viewBox='0 0 24 24'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <g clip-path='url(#clip0)'>
                <path
                  d='M16.5426 3.98285H3.12621C2.5052 3.98285 2 4.48805 2 5.10902V13.1581C2 13.7791 2.5052 14.2843 3.12621 14.2843H3.99618V17.2808C3.99618 17.4716 4.1111 17.6437 4.28743 17.7167C4.34579 17.7409 4.40711 17.7526 4.4679 17.7526C4.59071 17.7526 4.71133 17.7047 4.80161 17.6144L8.13173 14.2844H8.79986C9.06044 14.2844 9.27166 14.0731 9.27166 13.8126C9.27166 13.5519 9.06037 13.3407 8.79986 13.3407C8.79986 13.3407 7.91353 13.3413 7.90427 13.3423C7.79443 13.3497 7.68661 13.395 7.60263 13.4789L4.93977 16.1418C4.93977 16.1418 4.93895 13.7827 4.93743 13.7705C4.91614 13.5296 4.71411 13.3407 4.46774 13.3407H3.12621C3.02551 13.3407 2.94363 13.2588 2.94363 13.1581V5.10902C2.94363 5.00832 3.02555 4.92644 3.12621 4.92644H16.5426C16.6433 4.92644 16.7252 5.00836 16.7252 5.10902V8.19712C16.7252 8.4577 16.9365 8.66891 17.197 8.66891C17.4575 8.66891 17.6688 8.4577 17.6688 8.19712V5.10902C17.6688 4.48805 17.1636 3.98285 16.5426 3.98285Z'
                  fill='black'
                />
                <path
                  d='M20.8749 9.75348H11.4836C10.8627 9.75348 10.3574 10.2587 10.3574 10.8797V16.3707C10.3574 16.9917 10.8626 17.4969 11.4836 17.4969H17.3631L19.7451 19.879C19.8354 19.9692 19.9561 20.0172 20.0788 20.0172C20.1396 20.0172 20.201 20.0054 20.2593 19.9812C20.4356 19.9082 20.5506 19.7362 20.5506 19.5453V17.4969H20.8748C21.4958 17.4969 22.001 16.9917 22.001 16.3707V10.8797C22.0011 10.2587 21.4959 9.75348 20.8749 9.75348ZM21.0575 16.3707C21.0575 16.4714 20.9756 16.5533 20.8749 16.5533H20.079C19.8307 16.5533 19.6276 16.7452 19.609 16.9887C19.6078 16.999 19.607 18.4063 19.607 18.4063L17.894 16.6932C17.8922 16.6914 17.8903 16.6897 17.8885 16.6879C17.8818 16.6814 17.8754 16.6757 17.8694 16.6706C17.7863 16.5977 17.6779 16.5533 17.5588 16.5533H11.4836C11.3829 16.5533 11.3011 16.4713 11.3011 16.3707V10.8797C11.3011 10.7789 11.383 10.6971 11.4836 10.6971H20.8749C20.9756 10.6971 21.0575 10.779 21.0575 10.8797V16.3707Z'
                  fill='black'
                />
                <path
                  d='M16.1779 13.1527C15.9174 13.1527 15.7061 13.3641 15.7061 13.6245C15.7061 13.8849 15.9174 14.0963 16.1779 14.0963C16.4383 14.0963 16.6496 13.8849 16.6496 13.6245C16.6496 13.3641 16.4383 13.1527 16.1779 13.1527Z'
                  fill='black'
                />
                <path
                  d='M14.1289 7.10309H5.54211C5.28156 7.10309 5.07031 7.3143 5.07031 7.57489C5.07031 7.83547 5.2816 8.04668 5.54211 8.04668H14.1289C14.3895 8.04668 14.6007 7.83547 14.6007 7.57489C14.6007 7.3143 14.3895 7.10309 14.1289 7.10309Z'
                  fill='black'
                />
                <path
                  d='M8.80091 10.2214H5.54211C5.28156 10.2214 5.07031 10.4326 5.07031 10.6932C5.07031 10.9538 5.2816 11.165 5.54211 11.165H8.80091C9.0615 11.165 9.27271 10.9538 9.27271 10.6932C9.27271 10.4326 9.06146 10.2214 8.80091 10.2214Z'
                  fill='black'
                />
                <path
                  d='M13.9864 13.1527C13.7261 13.1527 13.5146 13.3641 13.5146 13.6245C13.5146 13.8849 13.7261 14.0963 13.9864 14.0963C14.2469 14.0963 14.4582 13.8849 14.4582 13.6245C14.4582 13.3641 14.2469 13.1527 13.9864 13.1527Z'
                  fill='black'
                />
                <path
                  d='M18.3712 13.1527C18.1108 13.1527 17.8994 13.3641 17.8994 13.6245C17.8994 13.8849 18.1108 14.0963 18.3712 14.0963C18.6317 14.0963 18.843 13.8849 18.843 13.6245C18.843 13.3641 18.6316 13.1527 18.3712 13.1527Z'
                  fill='black'
                />
              </g>
              <defs>
                <clipPath id='clip0'>
                  <rect
                    width='20'
                    height='20'
                    fill='white'
                    transform='translate(2 2)'
                  />
                </clipPath>
              </defs>
            </svg>
          ),
          render: () => <Chat />,
        },
      checkAccess(['0', '4', '5', '6']) &&
        process.env.KEYCLOAK_URL ===
          `https://sso.dev.utg.group/auth/` && {
          id: '6',
          title: 'Чат с заказчиком',
          to: `${book.flights}/chatCustomer`,
          icon: (
            <svg
              width='24'
              height='24'
              viewBox='0 0 24 24'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <g clip-path='url(#clip0)'>
                <path
                  d='M16.5426 3.98285H3.12621C2.5052 3.98285 2 4.48805 2 5.10902V13.1581C2 13.7791 2.5052 14.2843 3.12621 14.2843H3.99618V17.2808C3.99618 17.4716 4.1111 17.6437 4.28743 17.7167C4.34579 17.7409 4.40711 17.7526 4.4679 17.7526C4.59071 17.7526 4.71133 17.7047 4.80161 17.6144L8.13173 14.2844H8.79986C9.06044 14.2844 9.27166 14.0731 9.27166 13.8126C9.27166 13.5519 9.06037 13.3407 8.79986 13.3407C8.79986 13.3407 7.91353 13.3413 7.90427 13.3423C7.79443 13.3497 7.68661 13.395 7.60263 13.4789L4.93977 16.1418C4.93977 16.1418 4.93895 13.7827 4.93743 13.7705C4.91614 13.5296 4.71411 13.3407 4.46774 13.3407H3.12621C3.02551 13.3407 2.94363 13.2588 2.94363 13.1581V5.10902C2.94363 5.00832 3.02555 4.92644 3.12621 4.92644H16.5426C16.6433 4.92644 16.7252 5.00836 16.7252 5.10902V8.19712C16.7252 8.4577 16.9365 8.66891 17.197 8.66891C17.4575 8.66891 17.6688 8.4577 17.6688 8.19712V5.10902C17.6688 4.48805 17.1636 3.98285 16.5426 3.98285Z'
                  fill='black'
                />
                <path
                  d='M20.8749 9.75348H11.4836C10.8627 9.75348 10.3574 10.2587 10.3574 10.8797V16.3707C10.3574 16.9917 10.8626 17.4969 11.4836 17.4969H17.3631L19.7451 19.879C19.8354 19.9692 19.9561 20.0172 20.0788 20.0172C20.1396 20.0172 20.201 20.0054 20.2593 19.9812C20.4356 19.9082 20.5506 19.7362 20.5506 19.5453V17.4969H20.8748C21.4958 17.4969 22.001 16.9917 22.001 16.3707V10.8797C22.0011 10.2587 21.4959 9.75348 20.8749 9.75348ZM21.0575 16.3707C21.0575 16.4714 20.9756 16.5533 20.8749 16.5533H20.079C19.8307 16.5533 19.6276 16.7452 19.609 16.9887C19.6078 16.999 19.607 18.4063 19.607 18.4063L17.894 16.6932C17.8922 16.6914 17.8903 16.6897 17.8885 16.6879C17.8818 16.6814 17.8754 16.6757 17.8694 16.6706C17.7863 16.5977 17.6779 16.5533 17.5588 16.5533H11.4836C11.3829 16.5533 11.3011 16.4713 11.3011 16.3707V10.8797C11.3011 10.7789 11.383 10.6971 11.4836 10.6971H20.8749C20.9756 10.6971 21.0575 10.779 21.0575 10.8797V16.3707Z'
                  fill='black'
                />
                <path
                  d='M16.1779 13.1527C15.9174 13.1527 15.7061 13.3641 15.7061 13.6245C15.7061 13.8849 15.9174 14.0963 16.1779 14.0963C16.4383 14.0963 16.6496 13.8849 16.6496 13.6245C16.6496 13.3641 16.4383 13.1527 16.1779 13.1527Z'
                  fill='black'
                />
                <path
                  d='M14.1289 7.10309H5.54211C5.28156 7.10309 5.07031 7.3143 5.07031 7.57489C5.07031 7.83547 5.2816 8.04668 5.54211 8.04668H14.1289C14.3895 8.04668 14.6007 7.83547 14.6007 7.57489C14.6007 7.3143 14.3895 7.10309 14.1289 7.10309Z'
                  fill='black'
                />
                <path
                  d='M8.80091 10.2214H5.54211C5.28156 10.2214 5.07031 10.4326 5.07031 10.6932C5.07031 10.9538 5.2816 11.165 5.54211 11.165H8.80091C9.0615 11.165 9.27271 10.9538 9.27271 10.6932C9.27271 10.4326 9.06146 10.2214 8.80091 10.2214Z'
                  fill='black'
                />
                <path
                  d='M13.9864 13.1527C13.7261 13.1527 13.5146 13.3641 13.5146 13.6245C13.5146 13.8849 13.7261 14.0963 13.9864 14.0963C14.2469 14.0963 14.4582 13.8849 14.4582 13.6245C14.4582 13.3641 14.2469 13.1527 13.9864 13.1527Z'
                  fill='black'
                />
                <path
                  d='M18.3712 13.1527C18.1108 13.1527 17.8994 13.3641 17.8994 13.6245C17.8994 13.8849 18.1108 14.0963 18.3712 14.0963C18.6317 14.0963 18.843 13.8849 18.843 13.6245C18.843 13.3641 18.6316 13.1527 18.3712 13.1527Z'
                  fill='black'
                />
              </g>
              <defs>
                <clipPath id='clip0'>
                  <rect
                    width='20'
                    height='20'
                    fill='white'
                    transform='translate(2 2)'
                  />
                </clipPath>
              </defs>
            </svg>
          ),
          render: () => <Chat />,
        },
      checkAccess(['0', '4', '5', '6']) &&
        process.env.KEYCLOAK_URL ===
          `https://sso.dev.utg.group/auth/` && {
          id: '7',
          title: 'Экстренное оповещение',
          to: `${book.flights}/emergency`,
          icon: <Icon name={'emails'} />,
          render: () => <EmergencyAlert />,
        },
      checkAccess(['0', '4', '5', '6']) &&
        process.env.KEYCLOAK_URL ===
          `https://sso.dev.utg.group/auth/` && {
          id: '8',
          title: 'Табель смены',
          to: `${book.flights}/tabelShift`,
          icon: <Icon name={'list'} />,
          render: () => <WorkWithBid />,
        },
      checkAccess(['0', '4', '5', '6']) &&
        process.env.KEYCLOAK_URL ===
          `https://sso.dev.utg.group/auth/` && {
          id: '9',
          title: 'Уведомления',
          to: `${book.flights}/notification`,
          icon: (
            <svg
              width='24'
              height='24'
              viewBox='0 0 24 24'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <path
                d='M20.7345 15.8637C18.6174 13.746 18.2988 12.6834 18.2988 9.3C18.2988 5.82059 15.4789 3 12.0001 3C8.52124 3 5.70126 5.82062 5.70126 9.3C5.70126 11.1243 5.65267 11.8053 5.40155 12.6414C5.08926 13.683 4.44815 14.6802 3.26525 15.8637C2.69857 16.4307 3.09998 17.4 3.90158 17.4H8.89566L8.85034 17.85C8.85034 19.5897 10.2603 21 11.9997 21C13.7391 21 15.1491 19.5897 15.1491 17.85L15.1038 17.4H20.0982C20.9001 17.4 21.3015 16.4307 20.7345 15.8637ZM12.0003 20.1C10.758 20.1 9.75066 19.0923 9.75066 17.85L9.79597 17.4H14.2042L14.2501 17.85C14.25 19.0923 13.2427 20.1 12.0003 20.1ZM3.90186 16.5C6.60126 13.8 6.60126 12 6.60126 9.3C6.60126 6.31801 9.01835 3.9 12.0001 3.9C14.9818 3.9 17.3988 6.31801 17.3991 9.3C17.3991 12 17.3991 13.8 20.0985 16.5H3.90186Z'
                fill='black'
              />
            </svg>
          ),
          render: () => <WorkWithBid />,
        },
      checkAccess(['5']) && {
        id: '10',
        title: 'Панель Администратора',
        to: `${book.flights}/adminpanel`,
        icon: <Icon name={'internalAudit'} />,
        render: () => <AdminPanel />,
      },
    ],
    [],
  );

  return (
    <Layout title='Все задачи' sidebar={sidebar}>
      <div className={styles.main}>
        {sidebar.map(
          (item) =>
            item && (
              <Route
                key={item.id}
                path={item.to}
                render={item.render}
                exact
              />
            ),
        )}
      </div>
    </Layout>
  );
};

export default Flights;
